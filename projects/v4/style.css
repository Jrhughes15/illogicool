/* ===========================
   Facility Janitor â€” styles
   =========================== */

:root{
  --bg: #0b111a;
  --panel: #0e1622;
  --panel-2: #0f1826;
  --text: #e9eef7;
  --muted: #9aa6b2;
  --border: #1a2230;
  --accent: #2adf77;
  --accent-2: #57b6ff;
  --warn: #ffd166;
  --danger: #ff6b6b;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.45 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow: hidden;
}

/* -------- Top bar -------- */
.topbar{
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(16,22,33,.9), rgba(12,17,26,.9));
  backdrop-filter: blur(3px);
}
.topbar .brand{ font-weight: 800; letter-spacing: .2px; }
.topbar .muted.small{ margin-left: 6px; }
.topbar .controls{
  display: flex; align-items: center; gap: 10px; flex: 1; min-width: 0; flex-wrap: wrap;
}
.topbar label{ display: inline-flex; align-items: center; gap: 6px; font-weight: 600; color: var(--muted); }
.topbar input[type="text"]{
  height: 30px; padding: 0 8px; color: var(--text); background: #0c1420;
  border: 1px solid var(--border); border-radius: 8px; outline: none; min-width: 180px;
}
.topbar button{
  height: 30px; padding: 0 10px; border-radius: 8px; border: 1px solid var(--border);
  background: #111a28; color: var(--text); cursor: pointer;
}
.topbar button.primary{ background: #12321f; border-color: #184d2a; }
.spacer { flex: 1 1 auto; }

/* Noise meter */
.meterWrap{ display:flex; align-items:center; gap:8px; }
.meter{
  width: 120px; height: 8px; border-radius: 999px; outline: 1px solid var(--border);
  background: #0c1420; overflow: hidden;
}
.meter__fill{ width: 0%; height: 100%; background: linear-gradient(90deg, #5ae3ff, #2adf77); }

/* -------- Layout -------- */
.wrap {
  height: calc(100vh - 92px);
  display: grid;
  grid-template-columns: minmax(0, 1fr) 365px; /* retain your width */
  gap: 8px;
  padding: 8px;
}

/* Game stage */
.stage{
  position: relative;
  border: 1px solid var(--border);
  background:
    radial-gradient(1200px 480px at 40% 20%, rgba(90,150,255,0.06), transparent 60%),
    linear-gradient(180deg, #0b111a, #0a1018);
  border-radius: 12px;
  overflow: hidden;
  display: flex; align-items: center; justify-content: center;
}
canvas#game{ display: block; image-rendering: pixelated; }

/* Sidebar panel */
.panel {
  display: flex; flex-direction: column; gap: 10px;
  background: var(--panel); border: 1px solid var(--border);
  border-radius: 12px; padding: 10px;
  min-width: 240px; max-width: 353px; overflow: auto;
}

.blk{ background: var(--panel-2); border-radius: 10px; padding: 10px; }
details.blk > summary{
  list-style: none; cursor: pointer; font-weight: 700; color: var(--text); padding: 6px; border-radius: 6px;
}
details.blk > summary::-webkit-details-marker{ display:none; }
details.blk[open] > summary{ background: rgba(255,255,255,0.03); }

ul.tight{ margin: 0; padding-left: 18px; }
ul.tight li{ margin: 4px 0; }

.muted{ color: var(--muted); }
.small{ font-size: 12px; }

/* Legend chips */
.chip{ display:inline-block; width:12px; height:12px; border-radius:3px; margin-right:6px; vertical-align: -1px; border:1px solid #0a0; }
.chip.patroller{ background:#ffa257; border-color:#6b3a0f; }
.chip.sentry{ background:#ff5ea8; border-color:#60213e; }
.chip.seeker{ background:#ffc857; border-color:#6b5220; }
.chip.slime{ background:#b1ff7a; border-color:#2f5b28; }
.chip.camera{ background:#8fd3ff; border-color:#204860; }
.chip.safe{ background:#ffd166; border-color:#6b5120; }

/* Rows & grids */
.row{ display:flex; align-items:center; gap:8px; margin-top: 10px; }
.row.gap{ gap: 10px; }
.row.top{ align-items: flex-start; }
.row.wrap { flex-wrap: wrap; height: 47px; margin-top:-7px; margin-bottom:-5px;}
.grid{ display:grid; gap:10px; }
.grid.cols-2{ grid-template-columns: 1fr 1fr; }

/* Footer */
.bott{ padding: 6px 10px 10px; border-top: 1px solid var(--border); color: var(--muted); display: flex; justify-content: center; }

/* -------- Badges & score -------- */
.rankBadge{
  width: 60px; height: 60px; border-radius: 10px;
  background: #14251c; color: #9dffca; border:1px solid #1b3c2c;
  display:flex; align-items:center; justify-content:center;
  font-weight: 800; font-size: 42px;
}
.endhead{ display:flex; align-items:center; gap:12px; margin-bottom:6px; }
.endtitle h2{ margin: 0; }
.scoreline{ font-weight: 800; font-size: 18px; }

.grid.breakdown{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 6px 10px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px;
}
.grid.breakdown .line{ display: contents; }
.grid.breakdown .k{ color: var(--muted); }
.grid.breakdown .v{ text-align: right; }
.grid.breakdown .v.good{ color: var(--accent); }
.grid.breakdown .v.bad{ color: var(--danger); }

.feats { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
.badge {
  padding: 3px 6px; border-radius: 999px; font-size: 12px;
  background: #182235; border: 1px solid #263555; color: #cfe6ff;
  box-shadow: inset 0 0 0 1px #0f1626;
  opacity: .55;
}
.badge.on{ color: #0c2016; background: #22e074; border-color: #1aa75a; }
/* Optional: hint that a tooltip exists */
.badge:hover{ filter: brightness(1.08); }

/* -------- Buttons / inputs -------- */
button{ background: #101a28; color: var(--text); border: 1px solid var(--border); border-radius: 8px; padding: 8px 10px; cursor: pointer; }
button.primary{ background: #10331f; border-color: #175033; }
button:disabled{ opacity: .6; cursor: not-allowed; }
input[type="text"]{ background: #0c1420; border: 1px solid var(--border); border-radius: 8px; padding: 8px 10px; color: var(--text); }

/* -------- Modals -------- */
.modal{
  position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 50;
}
.modal:not(.hide){ display: flex; }
.modal__scrim{ position: absolute; inset: 0; background: rgba(7,10,16,.6); backdrop-filter: blur(2px); }
.modal__dialog{
  position: relative;
  width: min(850px, calc(100vw - 40px));
  height: 583px;
  max-height: calc(100vh - 120px);
  overflow: auto;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0px 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,.45);
}
.modal__dialog--compact {
  width: min(560px, calc(100vw - 32px));
  padding: 12px 14px;
  height: 474px; /* keep your height */
}

/* Modal body tightening */
.modal .lead{ color: var(--muted); margin-top: 6px; }
.modal .blk{ margin-top: 8px; margin-bottom: 8px; }

/* Accessibility helper when aria-hidden is set by JS */
[aria-hidden="true"]{ visibility: hidden; }

/* Utility */
.h3{ margin: 8px 0 6px; font-size: 15px; }
hr{ border: none; border-top: 1px solid var(--border); opacity: .8; }
